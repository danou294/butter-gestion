{% extends 'scripts_manager/base.html' %}

{% block content %}
<div class="space-y-6">
    <!-- Welcome Card -->
    <div class="bg-[#FFFFFF] rounded-[14px] shadow-sm p-8 border border-[#C9C1B1]">
        <h1 class="text-4xl font-serif font-bold text-[#111111] mb-4">üßà Bienvenue sur Butter</h1>
        <p class="text-lg text-[#535353]">Interface de gestion compl√®te pour votre application Firebase</p>
    </div>
    
    <!-- Configuration Status -->
    <div class="bg-[#FFFFFF] rounded-[14px] shadow-sm p-6 border border-[#C9C1B1]">
        <h2 class="text-2xl font-serif font-bold text-[#111111] mb-4">üîë Configuration Firebase</h2>
        
        <!-- Environnement actif -->
        <div class="mb-4 p-4 rounded-[14px] {% if firebase_env == 'dev' %}bg-yellow-50 border border-yellow-300{% else %}bg-green-50 border border-green-300{% endif %}">
            <div class="flex items-center gap-2 mb-2">
                <span class="text-2xl">{{ firebase_env_label }}</span>
                <p class="font-semibold {% if firebase_env == 'dev' %}text-yellow-800{% else %}text-green-800{% endif %}">
                    Environnement actif : <strong>{{ firebase_env|upper }}</strong>
                </p>
            </div>
            <p class="text-sm {% if firebase_env == 'dev' %}text-yellow-700{% else %}text-green-700{% endif %}">
                Pour changer d'environnement, d√©finissez la variable <code class="bg-white px-2 py-1 rounded">FIREBASE_ENV=dev</code> ou <code class="bg-white px-2 py-1 rounded">FIREBASE_ENV=prod</code>
            </p>
        </div>
        
        <!-- Fichier DEV -->
        <div class="mb-4">
            <h3 class="text-lg font-serif font-bold text-[#111111] mb-2">üîß Environnement DEV</h3>
            {% if service_account_dev_exists %}
            <div class="bg-[#D4F2DA] border border-[#60BC81] rounded-[14px] p-4">
                <div class="flex items-center gap-2 mb-2">
                    <span class="text-xl">‚úÖ</span>
                    <p class="font-semibold text-[#60BC81]">Fichier DEV pr√©sent</p>
                </div>
                <p class="text-xs text-[#60BC81]">
                    <code class="bg-[#FFFFFF] px-2 py-1 rounded-[14px]">{{ service_account_dev_path }}</code>
                </p>
            </div>
            {% else %}
            <div class="bg-[#F1EFEB] border border-[#C9C1B1] rounded-[14px] p-4">
                <div class="flex items-center gap-2 mb-2">
                    <span class="text-xl">‚ö†Ô∏è</span>
                    <p class="font-semibold text-[#535353]">Fichier DEV manquant</p>
                </div>
                <p class="text-xs text-[#535353]">
                    <code class="bg-[#FFFFFF] px-2 py-1 rounded-[14px]">{{ service_account_dev_path }}</code>
                </p>
            </div>
            {% endif %}
        </div>
        
        <!-- Fichier PROD -->
        <div class="mb-4">
            <h3 class="text-lg font-serif font-bold text-[#111111] mb-2">üöÄ Environnement PROD</h3>
            {% if service_account_prod_exists %}
            <div class="bg-[#D4F2DA] border border-[#60BC81] rounded-[14px] p-4">
                <div class="flex items-center gap-2 mb-2">
                    <span class="text-xl">‚úÖ</span>
                    <p class="font-semibold text-[#60BC81]">Fichier PROD pr√©sent</p>
                </div>
                <p class="text-xs text-[#60BC81]">
                    <code class="bg-[#FFFFFF] px-2 py-1 rounded-[14px]">{{ service_account_prod_path }}</code>
                </p>
            </div>
            {% else %}
            <div class="bg-[#F2D7D4] border border-[#D3695E] rounded-[14px] p-4">
                <div class="flex items-center gap-2 mb-2">
                    <span class="text-xl">‚ùå</span>
                    <p class="font-semibold text-[#D3695E]">Fichier PROD manquant</p>
                </div>
                <p class="text-xs text-[#D3695E]">
                    <code class="bg-[#FFFFFF] px-2 py-1 rounded-[14px]">{{ service_account_prod_path }}</code>
                </p>
            </div>
            {% endif %}
        </div>
        
        <!-- Fichier actuellement utilis√© -->
        {% if service_account_exists %}
        <div class="bg-[#D4F2DA] border border-[#60BC81] rounded-[14px] p-4">
            <div class="flex items-center gap-2 mb-2">
                <span class="text-2xl">‚úÖ</span>
                <p class="font-semibold text-[#60BC81]">Fichier actif configur√©</p>
            </div>
            <p class="text-sm text-[#60BC81] mb-2">
                Le fichier pour l'environnement <strong>{{ firebase_env|upper }}</strong> est pr√©sent et sera utilis√© automatiquement.
            </p>
            <p class="text-xs text-[#60BC81]">
                Chemin actif : <code class="bg-[#FFFFFF] px-2 py-1 rounded-[14px]">{{ service_account_path }}</code>
            </p>
        </div>
        {% else %}
        <div class="bg-[#F2D7D4] border border-[#D3695E] rounded-[14px] p-4">
            <div class="flex items-center gap-2 mb-2">
                <span class="text-2xl">‚ùå</span>
                <p class="font-semibold text-[#D3695E]">Fichier actif manquant</p>
            </div>
            <p class="text-sm text-[#D3695E] mb-2">
                Le fichier pour l'environnement <strong>{{ firebase_env|upper }}</strong> n'a pas √©t√© trouv√©.
            </p>
            <p class="text-xs text-[#D3695E]">
                Chemin attendu : <code class="bg-[#FFFFFF] px-2 py-1 rounded-[14px]">{{ service_account_path }}</code>
            </p>
        </div>
        {% endif %}
    </div>
    
    <!-- Quick Actions -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <a href="{% url 'scripts_manager:export_index' %}" class="bg-[#FFFFFF] rounded-[14px] shadow-sm p-6 border border-[#C9C1B1] hover:shadow-md hover:border-[#535353] transition-all group">
            <div class="text-4xl mb-3">üì§</div>
            <h3 class="text-xl font-serif font-bold text-[#111111] mb-2 group-hover:text-[#535353] transition-colors">Export</h3>
            <p class="text-[#535353]">Exporter les collections Firestore et utilisateurs Auth vers Excel</p>
        </a>
        
        <a href="{% url 'scripts_manager:users_list' %}" class="bg-[#FFFFFF] rounded-[14px] shadow-sm p-6 border border-[#C9C1B1] hover:shadow-md hover:border-[#535353] transition-all group">
            <div class="text-4xl mb-3">üë•</div>
            <h3 class="text-xl font-serif font-bold text-[#111111] mb-2 group-hover:text-[#535353] transition-colors">Utilisateurs</h3>
            <p class="text-[#535353]">G√©rer et suivre les utilisateurs avec RevenueCat</p>
        </a>
        
        <a href="{% url 'scripts_manager:restaurants_list' %}" class="bg-[#FFFFFF] rounded-[14px] shadow-sm p-6 border border-[#C9C1B1] hover:shadow-md hover:border-[#535353] transition-all group">
            <div class="text-4xl mb-3">üçΩÔ∏è</div>
            <h3 class="text-xl font-serif font-bold text-[#111111] mb-2 group-hover:text-[#535353] transition-colors">Restaurants</h3>
            <p class="text-[#535353]">CRUD complet pour la collection restaurants</p>
        </a>
        
        <a href="{% url 'scripts_manager:photos_list' %}" class="bg-[#FFFFFF] rounded-[14px] shadow-sm p-6 border border-[#C9C1B1] hover:shadow-md hover:border-[#535353] transition-all group">
            <div class="text-4xl mb-3">üì∏</div>
            <h3 class="text-xl font-serif font-bold text-[#111111] mb-2 group-hover:text-[#535353] transition-colors">Photos</h3>
            <p class="text-[#535353]">G√©rer les logos et photos des restaurants</p>
        </a>
        
        <a href="{% url 'scripts_manager:notifications_index' %}" class="bg-[#FFFFFF] rounded-[14px] shadow-sm p-6 border border-[#C9C1B1] hover:shadow-md hover:border-[#535353] transition-all group">
            <div class="text-4xl mb-3">üì±</div>
            <h3 class="text-xl font-serif font-bold text-[#111111] mb-2 group-hover:text-[#535353] transition-colors">Notifications</h3>
            <p class="text-[#535353]">Envoyer des notifications push aux utilisateurs</p>
        </a>
        
        <a href="{% url 'scripts_manager:import_restaurants_index' %}" class="bg-[#FFFFFF] rounded-[14px] shadow-sm p-6 border border-[#C9C1B1] hover:shadow-md hover:border-[#535353] transition-all group">
            <div class="text-4xl mb-3">üì•</div>
            <h3 class="text-xl font-serif font-bold text-[#111111] mb-2 group-hover:text-[#535353] transition-colors">Import Batch</h3>
            <p class="text-[#535353]">Importer des restaurants depuis Excel</p>
        </a>
    </div>
</div>
{% endblock %}
