{% extends 'scripts_manager/base.html' %}

{% block content %}
<div class="space-y-6">
    <!-- Welcome Card -->
    <div class="card bg-base-100 shadow-sm border border-base-300">
        <div class="card-body">
            <h1 class="text-4xl font-serif font-bold text-base-content">üßà Bienvenue sur Butter</h1>
            <p class="text-lg text-secondary">Interface de gestion compl√®te pour votre application Firebase</p>
        </div>
    </div>

    <!-- Configuration Status -->
    <div class="card bg-base-100 shadow-sm border border-base-300">
        <div class="card-body">
            <h2 class="card-title text-2xl font-serif text-base-content">üîë Configuration Firebase</h2>

            <!-- Environnement actif -->
            <div class="alert {% if firebase_env == 'dev' %}alert-warning{% else %}alert-success{% endif %} text-neutral">
                <div>
                    <span class="text-2xl">{{ firebase_env_label }}</span>
                    <div>
                        <p class="font-semibold text-neutral">Environnement actif : <strong>{{ firebase_env|upper }}</strong></p>
                        <p class="text-sm text-neutral/70">
                            Pour changer d'environnement, d√©finissez la variable <code class="bg-neutral/10 px-2 py-0.5 rounded text-xs font-mono">FIREBASE_ENV=dev</code> ou <code class="bg-neutral/10 px-2 py-0.5 rounded text-xs font-mono">FIREBASE_ENV=prod</code>
                        </p>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <!-- Fichier DEV -->
                <div>
                    <h3 class="text-lg font-serif font-bold text-base-content mb-2">üîß Environnement DEV</h3>
                    {% if service_account_dev_exists %}
                    <div class="alert alert-success text-neutral">
                        <div>
                            <span class="text-xl">‚úÖ</span>
                            <div>
                                <p class="font-semibold text-neutral">Fichier DEV pr√©sent</p>
                                <p class="text-xs text-neutral/70"><code class="bg-neutral/10 px-2 py-0.5 rounded font-mono">{{ service_account_dev_path }}</code></p>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="alert alert-info text-neutral">
                        <div>
                            <span class="text-xl">‚ö†Ô∏è</span>
                            <div>
                                <p class="font-semibold text-neutral">Fichier DEV manquant</p>
                                <p class="text-xs text-neutral/70"><code class="bg-neutral/10 px-2 py-0.5 rounded font-mono">{{ service_account_dev_path }}</code></p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>

                <!-- Fichier PROD -->
                <div>
                    <h3 class="text-lg font-serif font-bold text-base-content mb-2">üöÄ Environnement PROD</h3>
                    {% if service_account_prod_exists %}
                    <div class="alert alert-success text-neutral">
                        <div>
                            <span class="text-xl">‚úÖ</span>
                            <div>
                                <p class="font-semibold text-neutral">Fichier PROD pr√©sent</p>
                                <p class="text-xs text-neutral/70"><code class="bg-neutral/10 px-2 py-0.5 rounded font-mono">{{ service_account_prod_path }}</code></p>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="alert alert-error text-neutral">
                        <div>
                            <span class="text-xl">‚ùå</span>
                            <div>
                                <p class="font-semibold text-neutral">Fichier PROD manquant</p>
                                <p class="text-xs text-neutral/70"><code class="bg-neutral/10 px-2 py-0.5 rounded font-mono">{{ service_account_prod_path }}</code></p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Fichier actuellement utilis√© -->
            <div class="mt-4">
                {% if service_account_exists %}
                <div class="alert alert-success text-neutral">
                    <div>
                        <span class="text-2xl">‚úÖ</span>
                        <div>
                            <p class="font-semibold text-neutral">Fichier actif configur√©</p>
                            <p class="text-sm text-neutral/80">Le fichier pour l'environnement <strong>{{ firebase_env|upper }}</strong> est pr√©sent et sera utilis√© automatiquement.</p>
                            <p class="text-xs text-neutral/70">Chemin actif : <code class="bg-neutral/10 px-2 py-0.5 rounded font-mono">{{ service_account_path }}</code></p>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="alert alert-error text-neutral">
                    <div>
                        <span class="text-2xl">‚ùå</span>
                        <div>
                            <p class="font-semibold text-neutral">Fichier actif manquant</p>
                            <p class="text-sm text-neutral/80">Le fichier pour l'environnement <strong>{{ firebase_env|upper }}</strong> n'a pas √©t√© trouv√©.</p>
                            <p class="text-xs text-neutral/70">Chemin attendu : <code class="bg-neutral/10 px-2 py-0.5 rounded font-mono">{{ service_account_path }}</code></p>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <a href="{% url 'scripts_manager:export_index' %}" class="card bg-base-100 shadow-sm border border-base-300 hover:shadow-md hover:border-primary transition-all group">
            <div class="card-body">
                <div class="text-4xl mb-1">üì§</div>
                <h3 class="card-title font-serif text-base-content group-hover:text-primary transition-colors">Export</h3>
                <p class="text-secondary">Exporter les collections Firestore et utilisateurs Auth vers Excel</p>
            </div>
        </a>

        <a href="{% url 'scripts_manager:users_list' %}" class="card bg-base-100 shadow-sm border border-base-300 hover:shadow-md hover:border-primary transition-all group">
            <div class="card-body">
                <div class="text-4xl mb-1">üë•</div>
                <h3 class="card-title font-serif text-base-content group-hover:text-primary transition-colors">Utilisateurs</h3>
                <p class="text-secondary">G√©rer et suivre les utilisateurs avec RevenueCat</p>
            </div>
        </a>

        <a href="{% url 'scripts_manager:restaurants_list' %}" class="card bg-base-100 shadow-sm border border-base-300 hover:shadow-md hover:border-primary transition-all group">
            <div class="card-body">
                <div class="text-4xl mb-1">üçΩÔ∏è</div>
                <h3 class="card-title font-serif text-base-content group-hover:text-primary transition-colors">Restaurants</h3>
                <p class="text-secondary">CRUD complet pour la collection restaurants</p>
            </div>
        </a>

        <a href="{% url 'scripts_manager:photos_list' %}" class="card bg-base-100 shadow-sm border border-base-300 hover:shadow-md hover:border-primary transition-all group">
            <div class="card-body">
                <div class="text-4xl mb-1">üì∏</div>
                <h3 class="card-title font-serif text-base-content group-hover:text-primary transition-colors">Photos</h3>
                <p class="text-secondary">G√©rer les logos et photos des restaurants</p>
            </div>
        </a>

        <a href="{% url 'scripts_manager:notifications_index' %}" class="card bg-base-100 shadow-sm border border-base-300 hover:shadow-md hover:border-primary transition-all group">
            <div class="card-body">
                <div class="text-4xl mb-1">üì±</div>
                <h3 class="card-title font-serif text-base-content group-hover:text-primary transition-colors">Notifications</h3>
                <p class="text-secondary">Envoyer des notifications push aux utilisateurs</p>
            </div>
        </a>

        <a href="{% url 'scripts_manager:import_restaurants_index' %}" class="card bg-base-100 shadow-sm border border-base-300 hover:shadow-md hover:border-primary transition-all group">
            <div class="card-body">
                <div class="text-4xl mb-1">üì•</div>
                <h3 class="card-title font-serif text-base-content group-hover:text-primary transition-colors">Import Batch</h3>
                <p class="text-secondary">Importer des restaurants depuis Excel</p>
            </div>
        </a>
    </div>
</div>
{% endblock %}
