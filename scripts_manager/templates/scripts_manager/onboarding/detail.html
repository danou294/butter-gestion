{% extends 'scripts_manager/base.html' %}

{% block title %}{{ restaurant.name }} - Onboarding - Butter{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Navigation retour -->
    <div>
        <a href="{% url 'scripts_manager:onboarding_list' %}" class="text-secondary hover:text-base-content text-sm">
            â† Retour Ã  la liste
        </a>
    </div>

    <!-- Header -->
    <div class="card bg-base-100 shadow-sm border border-base-300">
        <div class="card-body">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                <div>
                    <div class="flex items-center gap-3 mb-2">
                        <h1 class="text-3xl font-serif font-bold text-base-content">{{ restaurant.name }}</h1>
                        {% if restaurant.lieu == 'Coffee shop' %}
                        <span class="px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">â˜• Coffee shop</span>
                        {% elif restaurant.lieu == 'Bar' %}
                        <span class="px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800">ğŸ¸ Bar</span>
                        {% else %}
                        <span class="px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">ğŸ½ï¸ Restaurant</span>
                        {% endif %}
                    </div>
                    <p class="text-secondary">
                        Tag : <code class="bg-base-200 px-2 py-0.5 rounded text-sm">{{ restaurant.tag }}</code>
                        {% if restaurant.specialite %}
                        â€” SpÃ©cialitÃ© : <strong>{{ restaurant.specialite }}</strong>
                        {% endif %}
                    </p>
                </div>
                <form method="POST" action="{% url 'scripts_manager:onboarding_delete' restaurant.id %}"
                      x-data x-on:submit.prevent="if(confirm('Supprimer {{ restaurant.name }} ?')) $el.submit()">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-error">ğŸ—‘ï¸ Supprimer</button>
                </form>
            </div>
        </div>
    </div>

    <!-- DonnÃ©es Firestore (JSON) -->
    <div class="card bg-base-100 shadow-sm border border-base-300">
        <div class="card-body">
            <h2 class="text-xl font-serif font-bold text-base-content mb-4">ğŸ“„ DonnÃ©es Firestore</h2>
            <pre class="bg-base-200 p-4 rounded text-sm text-base-content overflow-x-auto">{{ restaurant_json }}</pre>
        </div>
    </div>

    <!-- MÃ©dias -->
    <div class="card bg-base-100 shadow-sm border border-base-300">
        <div class="card-body">
            <h2 class="text-xl font-serif font-bold text-base-content mb-4">ğŸ“¸ MÃ©dias</h2>

            {% if restaurant.logo_url %}
            <div class="mb-4">
                <h3 class="text-sm font-medium text-secondary mb-2">Logo</h3>
                <img src="{{ restaurant.logo_url }}" alt="Logo {{ restaurant.name }}" class="h-16 rounded-lg border border-base-300">
            </div>
            {% else %}
            <p class="text-error text-sm mb-4">ğŸ–¼ï¸ Aucun logo</p>
            {% endif %}

            {% if restaurant.image_urls %}
            <div>
                <h3 class="text-sm font-medium text-secondary mb-2">Photos ({{ restaurant.image_urls|length }})</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    {% for url in restaurant.image_urls %}
                    <img src="{{ url }}" alt="Photo {{ forloop.counter }}" class="w-full h-32 object-cover rounded-lg border border-base-300">
                    {% endfor %}
                </div>
            </div>
            {% else %}
            <p class="text-error text-sm">ğŸ“¸ Aucune photo</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
